# 数据库设置说明

## 数据库初始化

1. 确保MySQL服务已启动
2. 创建数据库用户（可选）：
```sql
CREATE USER 'funds_user'@'localhost' IDENTIFIED BY 'your_password';
GRANT ALL PRIVILEGES ON funds_visualization.* TO 'funds_user'@'localhost';
FLUSH PRIVILEGES;
```

3. 执行初始化脚本：
```bash
mysql -u root -p < database/init.sql
```

## 数据库结构

### 主要表结构

**如果只有交易明细数据  可以将用户表，汇总表出主键卡号之外数据默认值设为0 null**

1. **交易明细表** - 存储所有交易记录
   - 主要字段：交易卡号、交易对手账卡号、交易金额、收付标志、交易时间等
   - 索引：针对卡号、时间、金额等字段建立复合索引

2. **用户表** - 存储用户基本信息
   - 主要字段：卡号、姓名、身份证号、开户银行等

3. **汇总表** - 存储统计汇总数据
   - 主要字段：总进出金额、交易笔数、风险标签等
   - 通过触发器自动更新

### 视图

- **交易关系视图** - 预计算的交易关系数据，提高查询性能

## 性能优化

1. 索引优化：为常用查询字段建立合适的索引
2. 触发器：自动维护汇总统计数据
3. 视图：预计算复杂的关联查询
4. 分区：可考虑按时间分区存储大量历史数据

## 测试数据

初始化脚本包含了5个用户和8条交易记录的测试数据，可用于开发测试。